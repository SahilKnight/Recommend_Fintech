import{a as m}from"./chunk-QX4B65OJ.js";import{a as s,b as o,c,g as n,l as u,o as l}from"./chunk-IHJ2JVIV.js";var p=class a{constructor(e){this.authService=e}plans=[{id:"trial",name:"3-Day Trial",price:0,features:["Access to 5 recommendations per day","Basic market insights","Email notifications"]},{id:"basic",name:"Basic Plan",price:999,features:["Unlimited recommendations","Advanced market analysis","Real-time alerts","Portfolio tracking"]},{id:"premium",name:"Premium Plan",price:1999,recommended:!0,features:["Everything in Basic","AI-powered insights","Custom risk management","Priority support","Advanced charting tools"]}];getPlans(){return n(this.plans)}getCurrentPlan(){let e=this.authService.getCurrentUser();if(!e)return n(null);let t=e.subscriptionType.toLowerCase(),r=this.plans.find(i=>i.id===t);return n(r||null)}upgradePlan(e){return new c(t=>{setTimeout(()=>{let r=this.authService.getCurrentUser();if(r){let i=o(s({},r),{subscriptionType:e.toUpperCase()});localStorage.setItem("currentUser",JSON.stringify(i))}t.next(!0),t.complete()},1e3)})}getRemainingTrialDays(){let e=this.authService.getCurrentUser();if(!e||!e.trialEndsAt)return 0;let t=new Date,i=new Date(e.trialEndsAt).getTime()-t.getTime(),d=Math.ceil(i/(1e3*60*60*24));return Math.max(0,d)}static \u0275fac=function(t){return new(t||a)(l(m))};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a};
